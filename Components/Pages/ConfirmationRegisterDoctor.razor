@page "/confirmationRegisterDoctor"
@using Microsoft.AspNetCore.WebUtilities
@inject NavigationManager Navigation

@code {
    private string service;
    private string petType;
    private string doctor;
    private string ownerName;
    private string ownerPhone;
    private string ownerEmail;
    private string petName;
    private string petAllergic;
    private string appointmentDate;

    protected override void OnInitialized()
    {
        // Parse the query parameters
        var uri = Navigation.ToAbsoluteUri(Navigation.Uri);
        var queryParams = QueryHelpers.ParseQuery(uri.Query);

        // Assign the parameters to local variables
        service = queryParams["service"];
        petType = queryParams["petType"];
        doctor = queryParams["doctor"];
        ownerName = queryParams["ownerName"];
        ownerPhone = queryParams["ownerPhone"];
        ownerEmail = queryParams["ownerEmail"];
        petName = queryParams["petName"];
        petAllergic = queryParams["petAllergic"];
        appointmentDate = queryParams["date"];
    }
}

<main class="space-y-3">
    <section class="auto-limit-w flex flex-col px-4 gap-8 min-h-[calc(100vh-9rem)]">
        <div class="space-y-3">
            <h2 class="font-semibold text-2xl md:text-6xl text-center"><span class="text-primary">Your Booking has Been Successfully Confirmed!</span></h2>
            <h3 class="text-lg md:text-2xl text-center">Booking details will be sent to owner’s credentials provided</h3>
        </div>

        <!-- Display the input details under the appropriate labels -->
        <div class="flex flex-col gap-2">
            <label class="text-lg md:text-xl font-semibold text-left">
                Pet Type: 
            </label>
            <div class="pl-4">@petType</div>
        </div>
        
        <div class="flex flex-col gap-2">
            <label class="text-lg md:text-xl font-semibold text-left">
                Chosen Service: 
            </label>
            <div class="pl-4">@service</div>
        </div>
        
        <div class="flex flex-col gap-2">
            <label class="text-lg md:text-xl font-semibold text-left">
                Chosen Doctor: 
            </label>
            <div class="pl-4">@doctor</div>
        </div>

        <div class="flex flex-col gap-2">
            <label class="text-lg md:text-xl font-semibold text-left">
                Owner's Name: 
            </label>
            <div class="pl-4">@ownerName</div>
        </div>

        <div class="flex flex-col gap-2">
            <label class="text-lg md:text-xl font-semibold text-left">
                Owner's Phone Number: 
            </label>
            <div class="pl-4">@ownerPhone</div>
        </div>

        <div class="flex flex-col gap-2">
            <label class="text-lg md:text-xl font-semibold text-left">
                Owner's Email: 
            </label>
            <div class="pl-4">@ownerEmail</div>
        </div>

        <div class="flex flex-col gap-2">
            <label class="text-lg md:text-xl font-semibold text-left">
                Pet's Name: 
            </label>
             <div class="pl-4">@petName</div>
        </div>

        <div class="flex flex-col gap-2">
            <label class="text-lg md:text-xl font-semibold text-left">
                Pet's Allergic: 
            </label>
             <div class="pl-4">@petAllergic</div>
        </div>

        <div class="flex flex-col gap-2">
            <label class="text-lg md:text-xl font-semibold text-left">
                Appointment Date: 
            </label>
             <div class="pl-4">@appointmentDate</div>
        </div>

        <div class="flex gap-5 justify-center">
            <Button class="border border-input bg-background">
                Edit Booking
            </Button>
            <Button class="bg-primary text-primary-foreground" @onclick="NavigateHome">
                Finish
            </Button>
        </div>
    </section>
</main>

@code {
    private void NavigateHome()
    {
        // Navigate back to the home page
        Navigation.NavigateTo("/");
    }
}
